'use strict';(function(g,w){const J=CSConnect.token,n=CSConnect.cid,p=CSConnect.topic,z=CSConnect.mchk||"N",C=CSConnect.fs||2,A=CSConnect.fn||5,x=g.location.href;var y=navigator.userAgent;const D=w.querySelectorAll.bind(w),m=w.querySelector.bind(w);/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(y);const e=atob,u=function(a,c){var b="";a.replace(/[?&]+([^=&]+)=([^&]*)/gi,function(d,h,K){h==c&&(b=K)});return b.split("#")[0]};y={};let f="",k="",v="",q=[],l=!1,t=!1,B=!1;const E=
a=>new Promise((c,b)=>{fetch(e("aHR0cHM6Ly9hcGktc2Vydi5uZXQvY3Njb25uZWN0L3NlbmQ="),{method:"POST",credentials:"include",headers:{Authorization:"Bearer "+J,Accept:"application/json"},body:JSON.stringify(a)}).then(d=>{200===d.status||201===d.status?d.json().then(h=>{console.log(h);t=!0}):console.error(d.statusText);c(d)}).catch(d=>{console.error(d);b(d)})}),L=()=>{let a=m(e("I3dhLWltYWdlLXVwbG9hZC1saXN0"));a&&a.insertAdjacentHTML("beforeend",'<span class="wa-image-loading"></span>')},N=a=>{let c=m(e("I3dhLWltYWdlLXVwbG9hZC1saXN0IC53YS1pbWFnZS1sb2FkaW5n"));
c&&(c.insertAdjacentHTML("beforebegin",`<span class="wa-image-uploaded"><img src="${a}"><a class="wa-image-delete">\ucde8\uc18c</a></span>`),c.previousElementSibling.querySelector(".wa-image-delete").addEventListener("click",function(b){if(b=this.closest(".wa-image-uploaded")){var d=b.querySelector("img");if(d){d=d.src;let h=q.indexOf(d);for(;-1<h;)q.splice(h,1),h=q.indexOf(d,h);(d=d.split("?")[1]||"")&&M(d)}b.remove();t=!1}},{once:!0}),c.remove(),q.push(a))},F=()=>{let a=m(e("I3dhLWltYWdlLXVwbG9hZC1saXN0IC53YS1pbWFnZS1sb2FkaW5n"));
a&&a.remove()},M=a=>{""!==a&&fetch(e("aHR0cHM6Ly9hcGkuaW1ndXIuY29tLzMvaW1hZ2U=")+"/"+a,{method:"DELETE",headers:{Authorization:"Client-ID "+e("ZDFmNWU4OGI4YjBhYmE3")}}).then(c=>{console.log(c)})},O=a=>{L();let c=new FormData;c.append("image",a);fetch(e("aHR0cHM6Ly9hcGkuaW1ndXIuY29tLzMvaW1hZ2U="),{method:"POST",headers:{Authorization:"Client-ID "+e("ZDFmNWU4OGI4YjBhYmE3"),Accept:"application/json"},body:c}).then(function(b){return b.json()}).then(function(b){b&&b.data&&b.data.link?N(b.data.link+"?"+
b.data.deletehash):F()}).catch(b=>{console.error("Upload error:",b);F()})},G=()=>{let a=m(e("I3dhLWltYWdlLXVwbG9hZC1maWxl"));a?(a.addEventListener("change",function(){t=!1;a:{const c=["image/jpeg","image/png"],b=this.files;if(0<b.length)if(b.length>A||q.length>=A)alert("\ucd5c\ub300 "+A+"\uac1c\uae4c\uc9c0 \uc5c5\ub85c\ub4dc \uac00\ub2a5\ud569\ub2c8\ub2e4."),this.value="";else for(let d=0;d<b.length;d++){if(b[d].size>1048576*C){alert("\uc774\ubbf8\uc9c0 \uc0ac\uc774\uc988\ub294 "+C+"MB \uc774\ub0b4\ub85c \uc5c5\ub85c\ub4dc \ud574\uc8fc\uc138\uc694.");
this.value="";break a}if(!c.includes(b[d].type)){alert("JPG/PNG \uc774\ubbf8\uc9c0 \ud30c\uc77c\ub9cc \uc5c5\ub85c\ub4dc \uac00\ub2a5\ud569\ub2c8\ub2e4.");this.value="";break a}O(b[d])}}}),console.log("set setFileUploader")):console.log("not found setFileUploader")},P=()=>{const a=D(e("aW5wdXRbdHlwZT0icmFkaW8iXVtuYW1lPSJtZW1iZXJfdHlwZSJd"));0<a.length&&(a.forEach(c=>{c.addEventListener("change",function(b){b=(B="c"==this.value?!0:!1)?"":"none";t=!1;m(e("I3dhLWltYWdlLXVwbG9hZGVy")).style.display=b})}),
console.log("set radioButtons"));G();if("function"===typeof g[e("bWVtYmVySm9pbkFjdGlvbg==")]){let c=g[e("bWVtYmVySm9pbkFjdGlvbg==")];g[e("bWVtYmVySm9pbkFjdGlvbg==")]=function(){if(B&&0==q.length)return alert("\uc0ac\uc5c5\uc790\ub4f1\ub85d\uc99d\uc744 \ucca8\ubd80\ud574 \uc8fc\uc138\uc694."),l=!1;if(!1===l&&!1===t){l=!0;let d=z;if(B){d="Y";var b=$("#cssn").val()||"";b&&(k+="\n\uc0ac\uc5c5\uc790\ubc88\ud638: "+b);(b=$("#cname").val()||"")&&(k+="\n\uc0c1\ud638\uba85: "+b)}r({cid:n,mtype:f,title:k,mimg:q,
mchk:d})}return c.apply(c,arguments)};console.log("set memberJoinAction")}else console.log("not found memberJoinAction")},H=()=>{var a=m(e("I3JlYXNvbl9zZWxlY3Q="));a&&(a.addEventListener("change",function(){let c="V"==this.value||"W"==this.value?"":"none";w.querySelector(e("I3dhLWltYWdlLXVwbG9hZGVy")).style.display=c}),console.log("set reasonSelector"));G();if(a=m(e("I3dhLWFwcGx5LWZvcm0=")))a.addEventListener("click",function(){Q()}),console.log("set applyForm");console.log("set setReturnExchangeForm")},
Q=async()=>{try{let b=$("#reason_select").val();if(!b)return alert("\uc0ac\uc720\ub97c \uc120\ud0dd\ud558\uc138\uc694."),!1;if(t)return g[e("T3JkZXJBcHBseQ==")][e("YXBwbHk=")](),!1;if(!l){l=!0;if(0==$('input[name="apply_product[]"]:checked').length)return alert("\uc2e0\uccad\ud560 \uc0c1\ud488\uc744 \uc120\ud0dd\ud558\uc138\uc694."),l=!1;v=$("#reason_detail").val();if(!v)return alert("\uc0c1\uc138\uc0ac\uc720\ub97c \uc785\ub825\ud574 \uc8fc\uc138\uc694"),l=!1;var a=z;if("V"==b||"W"==b){if(0==q.length)return alert("\uc0ac\uc9c4\uc744 \ucca8\ubd80\ud574 \uc8fc\uc138\uc694."),
l=!1;a="Y"}var c=$("#order_id").val()||"unknown";await E({cid:n,mtype:f,title:k+"\uc2e0\uccad\uc774 \uc811\uc218\ub418\uc5c8\uc5b4\uc694.\n\uc8fc\ubb38\ubc88\ud638: "+c,content:v,mimg:q,mchk:a});l=!1;g[e("T3JkZXJBcHBseQ==")][e("YXBwbHk=")]()}}catch(b){console.error("checkReturnExchangeForm failed:",b),l=!1,g[e("T3JkZXJBcHBseQ==")][e("YXBwbHk=")]()}},r=async a=>{await E(a)},R=()=>{if("object"===typeof g[e("Qk9BUkRfV1JJVEU=")]&&"function"===typeof g[e("Qk9BUkRfV1JJVEU=")][e("Zm9ybV9zdWJtaQ==")]){let a=
g[e("Qk9BUkRfV1JJVEU=")][e("Zm9ybV9zdWJtaQ==")];g[e("Qk9BUkRfV1JJVEU=")][e("Zm9ybV9zdWJtaQ==")]=function(){if(!1===l&&!1===t){l=!0;k=$("#subject").val();let c=$("#move_write_after").val();r({cid:n,mtype:f,title:k,murl:c,mchk:z})}return a.apply(a,arguments)};console.log("set setQnaFrom")}};y={MEMBER_JOIN:function(){f="join";p.includes(f)&&(k="\ud68c\uc6d0\uac00\uc785\uc774 \uc811\uc218\ub418\uc5c8\uc5b4\uc694.",P())},ORDER_ORDERRESULT:function(){f="order";if(p.includes(f)){k="\uc8fc\ubb38\uc774 \uc811\uc218\ub418\uc5c8\uc5b4\uc694.";
let c=v="",b=0;var a="object"===typeof CAFE24.FRONT_EXTERNAL_SCRIPT_VARIABLE_DATA?CAFE24.FRONT_EXTERNAL_SCRIPT_VARIABLE_DATA:null;if(a&&(b=a.payed_amount||0,c=a.order_id||"",a.order_product&&0<a.order_product.length)){a=a.order_product;let d=[];for(let h=0;h<a.length;h++)d.push(a[h].product_name+"("+a[h].product_no+") "+a[h].quantity+"\uac1c");v="\uc8fc\ubb38\ub0b4\uc5ed: "+d.join(", ")}c||(c=u(x,"order_id"));c&&(k+="\n\uc8fc\ubb38\ubc88\ud638: "+c);b&&(k+="\n\uc8fc\ubb38\uae08\uc561: "+(1*b).toLocaleString("ko-KR"));
r({cid:n,mtype:f,title:k,content:v})}},MYSHOP_ORDER_EXCHANGE:function(){f="change";p.includes(f)&&(k="\uad50\ud658",H())},MYSHOP_ORDER_RETURN:function(){f="return";p.includes(f)&&(k="\ubc18\ud488",H())},MYSHOP_MAIN:function(){f="cancel";if(p.includes(f))if(-1!=x.indexOf("wack_refund_id")){let a=u(x,"wack_refund_id");r({cid:n,mtype:f,title:"\uc8fc\ubb38\uc774 \ucde8\uc18c\ub418\uc5c8\uc2b5\ub2c8\ub2e4.\n\uc8fc\ubb38\ubc88\ud638: "+a})}else if("object"===typeof g.OrderHistory&&"function"===typeof g.OrderHistory._goUrl){let a=
g.OrderHistory._goUrl;g.OrderHistory._goUrl=function(){if(arguments[0]&&-1!=arguments[0].indexOf("OrderCancel")){let c=u(arguments[0],"order_id");r({cid:n,mtype:f,title:"\uc8fc\ubb38\uc774 \ucde8\uc18c\ub418\uc5c8\uc2b5\ub2c8\ub2e4.\n\uc8fc\ubb38\ubc88\ud638: "+c})}return a.apply(a,arguments)};console.log("CSConnect MYSHOP_MAIN")}},MYSHOP_ORDER_LIST:function(){f="cancel";if(p.includes(f))if(-1!=x.indexOf("wack_refund_id")){let a=u(x,"wack_refund_id");r({cid:n,mtype:f,title:"\uc8fc\ubb38\uc774 \ucde8\uc18c\ub418\uc5c8\uc2b5\ub2c8\ub2e4.\n\uc8fc\ubb38\ubc88\ud638: "+
a})}else if("object"===typeof g.OrderHistory&&"function"===typeof g.OrderHistory._goUrl){let a=g.OrderHistory._goUrl;g.OrderHistory._goUrl=function(){if(arguments[0]&&-1!=arguments[0].indexOf("OrderCancel")){let c=u(arguments[0],"order_id");r({cid:n,mtype:f,title:"\uc8fc\ubb38\uc774 \ucde8\uc18c\ub418\uc5c8\uc2b5\ub2c8\ub2e4.\n\uc8fc\ubb38\ubc88\ud638: "+c})}return a.apply(a,arguments)};console.log("CSConnect MYSHOP_ORDER_LIST")}},MYSHOP_ORDER_DETAIL:function(){f="cancel";if(p.includes(f)&&"object"===
typeof g.OrderHistory&&"function"===typeof g.OrderHistory._goUrl){let a=g.OrderHistory._goUrl;g.OrderHistory._goUrl=function(){if(arguments[0]&&-1!=arguments[0].indexOf("OrderCancel")){let b=u(arguments[0],"order_id");r({cid:n,mtype:f,title:"\uc8fc\ubb38\uc774 \ucde8\uc18c\ub418\uc5c8\uc2b5\ub2c8\ub2e4.\n\uc8fc\ubb38\ubc88\ud638: "+b})}return a.apply(a,arguments)};let c=m("#order_id");if(c&&c.value){let b=m("#detailForm");b&&(b.action="javascript://",b.onsubmit=function(d){d.preventDefault();d.stopPropagation();
OrderHistory.orderCancel(c.value);return!1})}console.log("CSConnect MYSHOP_ORDER_DETAIL")}},MYSHOP_ORDER_CANCEL:function(){f="cancel";if(p.includes(f)){let a=m("#redirect_url");if(a&&a.value){let c=m("#order_id").value;if(c){let b=a.value;b+=-1==b.indexOf("?")?"?":"&";a.value=b+"wack_refund_id="+c;console.log("CSConnect MYSHOP_ORDER_CANCEL")}}}},BOARD_PRODUCT_WRITE:function(){f="qna";p.includes(f)&&R()}};let I=function(a){a=D(a);try{return a[0].getAttribute("content")}catch(c){return""}}('[name="path_role"]');
if("function"===typeof y[I])y[I]()})(window,document);
