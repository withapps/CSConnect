'use strict';(function(h,u){const M=CSConnect.token,r=CSConnect.cid,p=CSConnect.topic,A=CSConnect.mchk||"N",E=CSConnect.fs||2,B=CSConnect.fn||5,x=h.location.href,N=navigator.userAgent,F=u.querySelectorAll.bind(u),n=u.querySelector.bind(u);/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(N);const e=atob,y=function(a,c){var b="";a.replace(/[?&]+([^=&]+)=([^&]*)/gi,function(d,g,O){g==c&&(b=O)});return b.split("#")[0]};let C={},f="",l="",v="",q=[],k=0,m=!1,t=!1,D=!1;const G=a=>new Promise((c,b)=>{fetch(e("aHR0cHM6Ly9hcGktc2Vydi5uZXQvY3Njb25uZWN0L3NlbmQ="),{method:"POST",credentials:"include",headers:{Authorization:"Bearer "+M,Accept:"application/json"},body:JSON.stringify(a)}).then(d=>{200===d.status||201===d.status?d.json().then(g=>{console.log(g);t=!0}):console.error(d.statusText);c(d)}).catch(d=>{console.error(d);b(d)})}),P=()=>{let a=n(e("I3dhLWltYWdlLXVwbG9hZC1saXN0"));a&&a.insertAdjacentHTML("beforeend",'<span class="wa-image-loading"></span>')},R=a=>{let c=n(e("I3dhLWltYWdlLXVwbG9hZC1saXN0IC53YS1pbWFnZS1sb2FkaW5n"));c&&(c.insertAdjacentHTML("beforebegin",`<span class="wa-image-uploaded"><img src="${a}"><a class="wa-image-delete">\ucde8\uc18c</a></span>`),c.previousElementSibling.querySelector(".wa-image-delete").addEventListener("click",function(b){if(b=this.closest(".wa-image-uploaded")){var d=b.querySelector("img");if(d){d=d.src;let g=q.indexOf(d);for(;-1<g;)q.splice(g,1),g=q.indexOf(d,g);(d=d.split("?")[1]||"")&&Q(d)}b.remove();t=!1}},{once:!0}),c.remove(),q.push(a))},H=()=>{let a=n(e("I3dhLWltYWdlLXVwbG9hZC1saXN0IC53YS1pbWFnZS1sb2FkaW5n"));a&&a.remove()},Q=a=>{""!==a&&fetch(e("aHR0cHM6Ly9hcGkuaW1ndXIuY29tLzMvaW1hZ2U=")+"/"+a,{method:"DELETE",headers:{Authorization:"Client-ID "+e("ZDFmNWU4OGI4YjBhYmE3")}}).then(c=>{console.log(c)})},S=a=>{P();let c=new FormData;c.append("image",a);fetch(e("aHR0cHM6Ly9hcGkuaW1ndXIuY29tLzMvaW1hZ2U="),{method:"POST",headers:{Authorization:"Client-ID "+e("ZDFmNWU4OGI4YjBhYmE3"),Accept:"application/json"},body:c}).then(function(b){return b.json()}).then(function(b){b&&b.data&&b.data.link?R(b.data.link+"?"+b.data.deletehash):H()}).catch(b=>{console.error("Upload error:",b);H()})},I=()=>{let a=n(e("I3dhLWltYWdlLXVwbG9hZC1maWxl"));a?(a.addEventListener("change",function(){t=!1;a:{const c=["image/jpeg","image/png"],b=this.files;if(0<b.length)if(b.length>B||q.length>=B)alert("\ucd5c\ub300 "+B+"\uac1c\uae4c\uc9c0 \uc5c5\ub85c\ub4dc \uac00\ub2a5\ud569\ub2c8\ub2e4."),this.value="";else for(let d=0;d<b.length;d++){if(b[d].size>1048576*E){alert("\uc774\ubbf8\uc9c0 \uc0ac\uc774\uc988\ub294 "+E+"MB \uc774\ub0b4\ub85c \uc5c5\ub85c\ub4dc \ud574\uc8fc\uc138\uc694.");this.value="";break a}if(!c.includes(b[d].type)){alert("JPG/PNG \uc774\ubbf8\uc9c0 \ud30c\uc77c\ub9cc \uc5c5\ub85c\ub4dc \uac00\ub2a5\ud569\ub2c8\ub2e4.");this.value="";break a}S(b[d])}}}),console.log("set setFileUploader")):console.log("not found setFileUploader")},w=async a=>{await G(a)},J=()=>{if("function"===typeof h[e("bWVtYmVySm9pbkFjdGlvbg==")]){let a=h[e("bWVtYmVySm9pbkFjdGlvbg==")];h[e("bWVtYmVySm9pbkFjdGlvbg==")]=function(){if(D&&0==q.length)return alert("\uc0ac\uc5c5\uc790\ub4f1\ub85d\uc99d\uc744 \ucca8\ubd80\ud574 \uc8fc\uc138\uc694."),m=!1;if(!1===m&&!1===t){m=!0;let b=A;if(D){b="Y";var c=$("#cssn").val()||"";c&&(l+="\n\uc0ac\uc5c5\uc790\ubc88\ud638: "+c);(c=$("#cname").val()||"")&&(l+="\n\uc0c1\ud638\uba85: "+c)}w({cid:r,mtype:f,title:l,mimg:q,mchk:b})}return a.apply(a,arguments)};console.log("set memberJoinAction")}else k++,5>=k&&setTimeout(function(){J()},500),console.log("set setJoinForm ready: "+k)},T=()=>{const a=F(e("aW5wdXRbdHlwZT0icmFkaW8iXVtuYW1lPSJtZW1iZXJfdHlwZSJd"));0<a.length&&(a.forEach(c=>{c.addEventListener("change",function(b){b=(D="c"==this.value?!0:!1)?"":"none";t=!1;n(e("I3dhLWltYWdlLXVwbG9hZGVy")).style.display=b})}),console.log("set radioButtons"));I();k=0;J()},K=()=>{var a=n(e("I3JlYXNvbl9zZWxlY3Q="));a&&(a.addEventListener("change",function(){let c="V"==this.value||"W"==this.value?"":"none";u.querySelector(e("I3dhLWltYWdlLXVwbG9hZGVy")).style.display=c}),console.log("set reasonSelector"));I();if(a=n(e("I3dhLWFwcGx5LWZvcm0=")))a.addEventListener("click",function(){U()}),console.log("set applyForm");console.log("set setReturnExchangeForm")},U=async()=>{try{let b=$("#reason_select").val();if(!b)return alert("\uc0ac\uc720\ub97c \uc120\ud0dd\ud558\uc138\uc694."),!1;if(t)return h[e("T3JkZXJBcHBseQ==")][e("YXBwbHk=")](),!1;if(!m){m=!0;if(0==$('input[name="apply_product[]"]:checked').length)return alert("\uc2e0\uccad\ud560 \uc0c1\ud488\uc744 \uc120\ud0dd\ud558\uc138\uc694."),m=!1;v=$("#reason_detail").val();if(!v)return alert("\uc0c1\uc138\uc0ac\uc720\ub97c \uc785\ub825\ud574 \uc8fc\uc138\uc694"),m=!1;var a=A;if("V"==b||"W"==b){if(0==q.length)return alert("\uc0ac\uc9c4\uc744 \ucca8\ubd80\ud574 \uc8fc\uc138\uc694."),m=!1;a="Y"}var c=$("#order_id").val()||"unknown";await G({cid:r,mtype:f,title:l+"\uc2e0\uccad\uc774 \uc811\uc218\ub418\uc5c8\uc5b4\uc694.\n\uc8fc\ubb38\ubc88\ud638: "+c,content:v,mimg:q,mchk:a});m=!1;h[e("T3JkZXJBcHBseQ==")][e("YXBwbHk=")]()}}catch(b){console.error("checkReturnExchangeForm failed:",b),m=!1,h[e("T3JkZXJBcHBseQ==")][e("YXBwbHk=")]()}},z=(a=!1)=>{if("object"===typeof h.OrderHistory&&"function"===typeof h.OrderHistory._goUrl){let c=h.OrderHistory._goUrl;h.OrderHistory._goUrl=function(){if(arguments[0]&&-1!=arguments[0].indexOf("OrderCancel")){let b=y(arguments[0],"order_id");w({cid:r,mtype:f,title:"\uc8fc\ubb38\uc774 \ucde8\uc18c\ub418\uc5c8\uc2b5\ub2c8\ub2e4.\n\uc8fc\ubb38\ubc88\ud638: "+b})}return c.apply(c,arguments)};console.log("set setCancelForm");if(a){let b=n("#order_id");if(b&&b.value){let d=n("#detailForm");d&&(d.action="javascript://",d.onsubmit=function(g){g.preventDefault();g.stopPropagation();OrderHistory.orderCancel(b.value);return!1})}console.log("set setCancelFormAction")}}else k++,5>=k&&setTimeout(function(){z(a)},500),console.log("set setCancelForm ready: "+k)},L=()=>{if("object"===typeof h[e("Qk9BUkRfV1JJVEU=")]&&"function"===typeof h[e("Qk9BUkRfV1JJVEU=")][e("Zm9ybV9zdWJtaQ==")]){let a=h[e("Qk9BUkRfV1JJVEU=")][e("Zm9ybV9zdWJtaQ==")];h[e("Qk9BUkRfV1JJVEU=")][e("Zm9ybV9zdWJtaQ==")]=function(){if(!1===m&&!1===t){m=!0;l=$("#subject").val();let c=$("#move_write_after").val();w({cid:r,mtype:f,title:l,murl:c,mchk:A})}return a.apply(a,arguments)};console.log("set setQnaForm")}else k++,5>=k&&setTimeout(function(){L()},500),console.log("set setQnaForm ready: "+k)};C={MEMBER_JOIN:function(){f="join";p.includes(f)&&(l="\ud68c\uc6d0\uac00\uc785\uc774 \uc811\uc218\ub418\uc5c8\uc5b4\uc694.",T())},ORDER_ORDERRESULT:function(){f="order";if(p.includes(f)){l="\uc8fc\ubb38\uc774 \uc811\uc218\ub418\uc5c8\uc5b4\uc694.";let c=v="",b=0;var a="object"===typeof CAFE24.FRONT_EXTERNAL_SCRIPT_VARIABLE_DATA?CAFE24.FRONT_EXTERNAL_SCRIPT_VARIABLE_DATA:null;if(a&&(b=a.payed_amount||0,c=a.order_id||"",a.order_product&&0<a.order_product.length)){a=a.order_product;let d=[];for(let g=0;g<a.length;g++)d.push(a[g].product_name+"("+a[g].product_no+") "+a[g].quantity+"\uac1c");v="\uc8fc\ubb38\ub0b4\uc5ed: "+d.join(", ")}c||(c=y(x,"order_id"));c&&(l+="\n\uc8fc\ubb38\ubc88\ud638: "+c);b&&(l+="\n\uc8fc\ubb38\uae08\uc561: "+(1*b).toLocaleString("ko-KR"));w({cid:r,mtype:f,title:l,content:v})}},MYSHOP_ORDER_EXCHANGE:function(){f="change";p.includes(f)&&(l="\uad50\ud658",K())},MYSHOP_ORDER_RETURN:function(){f="return";p.includes(f)&&(l="\ubc18\ud488",K())},MYSHOP_MAIN:function(){f="cancel";if(p.includes(f))if(-1!=x.indexOf("wack_refund_id")){let a=y(x,"wack_refund_id");w({cid:r,mtype:f,title:"\uc8fc\ubb38\uc774 \ucde8\uc18c\ub418\uc5c8\uc2b5\ub2c8\ub2e4.\n\uc8fc\ubb38\ubc88\ud638: "+a})}else k=0,z()},MYSHOP_ORDER_LIST:function(){f="cancel";if(p.includes(f))if(-1!=x.indexOf("wack_refund_id")){let a=y(x,"wack_refund_id");w({cid:r,mtype:f,title:"\uc8fc\ubb38\uc774 \ucde8\uc18c\ub418\uc5c8\uc2b5\ub2c8\ub2e4.\n\uc8fc\ubb38\ubc88\ud638: "+a})}else k=0,z()},MYSHOP_ORDER_DETAIL:function(){f="cancel";p.includes(f)&&(k=0,z(!0))},MYSHOP_ORDER_CANCEL:function(){f="cancel";if(p.includes(f)){let a=n("#redirect_url");if(a&&a.value){let c=n("#order_id").value;if(c){let b=a.value;b+=-1==b.indexOf("?")?"?":"&";a.value=b+"wack_refund_id="+c;console.log("set MYSHOP_ORDER_CANCEL")}}}},BOARD_PRODUCT_WRITE:function(){f="qna";p.includes(f)&&(k=0,L())}};u.addEventListener("DOMContentLoaded",function(){{let c=F('[name="path_role"]');try{var a=c[0].getAttribute("content")}catch(b){a=""}}if("function"===typeof C[a])C[a]()})})(window,document);
